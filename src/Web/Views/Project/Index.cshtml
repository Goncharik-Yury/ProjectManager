@*@model List<ProjectViewModel>*@
@model ProjectAndTaskViewModel

@{
    ViewData["Title"] = "Tasks main page";
}

<div>
    <h2>Projects</h2>
    <hr />
    <partial name="Buttons\_CreateButtonPartial" />
    <br /><br />
    <table class="table">
        @foreach (ProjectViewModel Project in Model.Projects)
        {
            <tr>
                <th>
                    @Html.DisplayNameFor(m => m.Projects[0].Name)
                </th>
                <th>
                    @Html.DisplayNameFor(m => m.Projects[0].ShortName)
                </th>
                <th>
                    @Html.DisplayNameFor(m => m.Projects[0].Description)
                </th>
            </tr>
            <tr>
                <td class="col-sm-10">
                    @Html.DisplayFor(q => Project.Name)
                </td>
                <td class="col-sm-10">
                    @Html.DisplayFor(q => Project.ShortName)
                </td>
                <td class="col-sm-10">
                    @Html.DisplayFor(q => Project.Description)
                </td>
                <td class="col-sm-10">
                    <partial name="Buttons\_EditButtonPartial" , model="@Project.Id" />
                </td>
                <td class="col-sm-10">
                    <partial name="Buttons\_DeleteButtonPartial" , model="@Project.Id" />
                </td>
            </tr>

            bool AddTableHeads = true;
            @foreach (ProjectTaskViewModel ProjectTask in Model.ProjectTasks)
            {

                if (Project.Id == ProjectTask.ProjectId)
                {
                    if (AddTableHeads)
                    {
                        AddTableHeads = false;
                        <tr>
                            <th>

                            </th>
                            <th>
                                @Html.DisplayNameFor(m => m.ProjectTasks[0].Name)
                            </th>
                            <th>
                                @Html.DisplayNameFor(m => m.ProjectTasks[0].TimeToComplete)
                            </th>
                            <th>
                                @Html.DisplayNameFor(m => m.ProjectTasks[0].BeginDate)
                            </th>
                            <th>
                                @Html.DisplayNameFor(m => m.ProjectTasks[0].EndDate)
                            </th>
                            <th>
                                @Html.DisplayNameFor(m => m.ProjectTasks[0].Status)
                            </th>
                        </tr>
                    }
                    <tr>
                        <td></td>
                        <td class="col-sm-10">
                            @Html.DisplayFor(q => ProjectTask.Name)
                        </td>
                        <td class="col-sm-10">
                            @Html.DisplayFor(q => ProjectTask.TimeToComplete)
                        </td>
                        <td class="col-sm-10">
                            @Html.DisplayFor(q => ProjectTask.BeginDate)
                        </td>
                        <td class="col-sm-10">
                            @Html.DisplayFor(q => ProjectTask.EndDate)
                        </td>
                        <td class="col-sm-10">
                            @Html.DisplayFor(q => ProjectTask.Status)
                        </td>

                        @*<td class="col-sm-10">
                                <partial name="Buttons\_EditButtonPartial" , model="@ProjectTask.Id" />
                            </td>
                            <td class="col-sm-10">
                                <partial name="Buttons\_DeleteButtonPartial" , model="@ProjectTask.Id" />
                            </td>*@
                    </tr>

                }
            }
            <tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>
        }



    </table>
</div>